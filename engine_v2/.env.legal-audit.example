# =============================================================================
# CONFIGURACIÓN DE VARIABLES DE ENTORNO - TuCentroPDF Engine V2
# SISTEMA DE AUDITORÍA LEGAL Y EVIDENCIA DIGITAL
# =============================================================================

# -----------------------------------------------------------------------------
# 1. CONFIGURACIÓN DE BASE DE DATOS POSTGRESQL
# -----------------------------------------------------------------------------
# Base de datos principal para auditoría legal
DB_HOST=localhost
DB_PORT=5432
DB_NAME=tucentropdf_legal
DB_USER=tucentropdf_audit
DB_PASSWORD=secure_audit_password_2024
DB_SSLMODE=prefer

# Pool de conexiones para alta concurrencia
DB_MAX_IDLE_CONNS=10
DB_MAX_OPEN_CONNS=100
DB_CONN_MAX_LIFETIME=3600

# -----------------------------------------------------------------------------
# 2. CIFRADO Y SEGURIDAD CRIPTOGRÁFICA 
# -----------------------------------------------------------------------------
# Clave maestra para cifrado AES-256-GCM (CRÍTICA - MANTENER SECRETA)
LEGAL_AUDIT_ENCRYPTION_KEY=your_32_byte_base64_key_here_change_in_production_2024

# Salt para derivación de claves PBKDF2 (64 bytes en base64)
LEGAL_AUDIT_ENCRYPTION_SALT=your_64_byte_salt_for_key_derivation_change_in_production

# Secreto para firmas HMAC-SHA256 (256 bits mínimo)
LEGAL_AUDIT_HMAC_SECRET=your_hmac_secret_key_for_digital_signatures_minimum_256_bits

# Iteraciones PBKDF2 para derivación segura de claves
LEGAL_AUDIT_PBKDF2_ITERATIONS=100000

# -----------------------------------------------------------------------------
# 3. RETENCIÓN Y ARCHIVADO LEGAL
# -----------------------------------------------------------------------------
# Periodo de retención legal en días (3 años = 1095 días)
LEGAL_AUDIT_RETENTION_DAYS=1095

# Directorio para archivos de exportación legal
LEGAL_AUDIT_EXPORT_DIR=/var/tucentropdf/exports/legal

# Directorio para archivos archivados
LEGAL_AUDIT_ARCHIVE_DIR=/var/tucentropdf/archives/legal

# Nivel de compresión para archivos (1-9, 6 es balance óptimo)
LEGAL_AUDIT_COMPRESSION_LEVEL=6

# Habilitar cifrado de archivos archivados
LEGAL_AUDIT_ENCRYPT_ARCHIVES=true

# -----------------------------------------------------------------------------
# 4. AUTENTICACIÓN JWT PARA ADMINISTRADORES
# -----------------------------------------------------------------------------
# Secreto para firma de tokens JWT (mínimo 256 bits)
JWT_SECRET_KEY=your_jwt_secret_key_for_admin_authentication_minimum_256_bits_2024

# Duración de tokens de administrador en horas
JWT_ADMIN_TOKEN_DURATION=8

# Algoritmo de firma JWT (HS256, HS384, HS512)
JWT_SIGNING_ALGORITHM=HS256

# Emisor de tokens JWT
JWT_ISSUER=tucentropdf-engine-v2

# Audiencia para tokens de administrador
JWT_ADMIN_AUDIENCE=tucentropdf-legal-audit

# -----------------------------------------------------------------------------
# 5. CONFIGURACIÓN DE SEGURIDAD Y MONITOREO
# -----------------------------------------------------------------------------
# Habilitar detección de abuso automática
LEGAL_AUDIT_ABUSE_DETECTION=true

# Límites de rate por plan (requests por minuto)
LEGAL_AUDIT_RATE_LIMIT_FREE=10
LEGAL_AUDIT_RATE_LIMIT_BASIC=30
LEGAL_AUDIT_RATE_LIMIT_PRO=60
LEGAL_AUDIT_RATE_LIMIT_ENTERPRISE=120
LEGAL_AUDIT_RATE_LIMIT_API=300

# Umbral para detección de actividad sospechosa
LEGAL_AUDIT_SUSPICIOUS_THRESHOLD=5

# Habilitar logging de seguridad detallado
LEGAL_AUDIT_DETAILED_LOGGING=true

# -----------------------------------------------------------------------------
# 6. CONFIGURACIÓN DE EXPORTACIÓN Y EVIDENCIA
# -----------------------------------------------------------------------------
# Tiempo de expiración de tokens de descarga en días
LEGAL_AUDIT_DOWNLOAD_TOKEN_EXPIRY=7

# Tamaño máximo de exportación en MB
LEGAL_AUDIT_MAX_EXPORT_SIZE_MB=1000

# Formatos de exportación permitidos (json,csv,xml)
LEGAL_AUDIT_EXPORT_FORMATS=json,csv,xml

# Habilitar firmas digitales en exportaciones
LEGAL_AUDIT_EXPORT_SIGNATURES=true

# -----------------------------------------------------------------------------
# 7. CONFIGURACIÓN DE PERFORMANCE
# -----------------------------------------------------------------------------
# Tamaño de lote para operaciones masivas
LEGAL_AUDIT_BATCH_SIZE=100

# Tamaño de lote para exportaciones grandes
LEGAL_AUDIT_EXPORT_BATCH_SIZE=1000

# Tamaño de lote para verificación de integridad
LEGAL_AUDIT_INTEGRITY_BATCH_SIZE=50

# Timeout para operaciones de exportación en minutos
LEGAL_AUDIT_EXPORT_TIMEOUT_MINUTES=30

# -----------------------------------------------------------------------------
# 8. CONFIGURACIÓN DE ARCHIVADO AUTOMÁTICO
# -----------------------------------------------------------------------------
# Ejecutar archivado automático (true/false)
LEGAL_AUDIT_AUTO_ARCHIVE=true

# Días después de los cuales archivar registros
LEGAL_AUDIT_ARCHIVE_AFTER_DAYS=90

# Hora del día para ejecutar archivado (formato 24h: 02:00)
LEGAL_AUDIT_ARCHIVE_TIME=02:00

# Habilitar limpieza automática de exportaciones expiradas
LEGAL_AUDIT_CLEANUP_EXPIRED_EXPORTS=true

# -----------------------------------------------------------------------------
# 9. CONFIGURACIÓN DE NOTIFICACIONES Y ALERTAS
# -----------------------------------------------------------------------------
# Email para notificaciones de integridad críticas
LEGAL_AUDIT_ALERT_EMAIL=legal@tucentropdf.com

# Webhook URL para alertas de seguridad
LEGAL_AUDIT_SECURITY_WEBHOOK=https://hooks.tucentropdf.com/security

# Habilitar alertas por violaciones de integridad
LEGAL_AUDIT_INTEGRITY_ALERTS=true

# Umbral de score de integridad para alertas (0-100)
LEGAL_AUDIT_INTEGRITY_ALERT_THRESHOLD=95

# -----------------------------------------------------------------------------
# 10. CONFIGURACIÓN DE DESARROLLO Y DEBUG
# -----------------------------------------------------------------------------
# Nivel de logging (DEBUG, INFO, WARN, ERROR)
LEGAL_AUDIT_LOG_LEVEL=INFO

# Habilitar modo debug para desarrollo
LEGAL_AUDIT_DEBUG_MODE=false

# Habilitar métricas detalladas de performance
LEGAL_AUDIT_PERFORMANCE_METRICS=true

# Directorio para logs de auditoría del sistema
LEGAL_AUDIT_LOG_DIR=/var/log/tucentropdf/legal-audit

# -----------------------------------------------------------------------------
# 11. CONFIGURACIÓN DE COMPLIANCE Y REGULACIONES
# -----------------------------------------------------------------------------
# Estándar de compliance (GDPR, CCPA, SOX, HIPAA)
LEGAL_AUDIT_COMPLIANCE_STANDARD=GDPR,CCPA

# Región legal para compliance
LEGAL_AUDIT_LEGAL_REGION=EU,US

# Habilitar anonimización para compliance
LEGAL_AUDIT_ENABLE_ANONYMIZATION=true

# Tiempo de retención para datos anonimizados en días
LEGAL_AUDIT_ANONYMIZED_RETENTION_DAYS=2555  # 7 años

# -----------------------------------------------------------------------------
# 12. CONFIGURACIÓN DE ALTA DISPONIBILIDAD
# -----------------------------------------------------------------------------
# Habilitar replicación de auditoría
LEGAL_AUDIT_ENABLE_REPLICATION=false

# URL de base de datos secundaria para replicación
LEGAL_AUDIT_REPLICA_DB_URL=""

# Intervalo de sincronización en minutos
LEGAL_AUDIT_SYNC_INTERVAL_MINUTES=5

# Habilitar failover automático
LEGAL_AUDIT_AUTO_FAILOVER=false

# =============================================================================
# INSTRUCCIONES DE CONFIGURACIÓN
# =============================================================================

# 1. GENERAR CLAVES SEGURAS:
#    - Use openssl rand -base64 32 para ENCRYPTION_KEY
#    - Use openssl rand -base64 64 para ENCRYPTION_SALT
#    - Use openssl rand -base64 32 para HMAC_SECRET
#    - Use openssl rand -base64 32 para JWT_SECRET_KEY

# 2. CONFIGURAR POSTGRESQL:
#    - Crear base de datos: createdb tucentropdf_legal
#    - Crear usuario: CREATE ROLE tucentropdf_audit WITH LOGIN PASSWORD '...'
#    - Ejecutar migración: psql -d tucentropdf_legal -f scripts/legal_audit_migration.sql

# 3. CONFIGURAR DIRECTORIOS:
#    sudo mkdir -p /var/tucentropdf/exports/legal
#    sudo mkdir -p /var/tucentropdf/archives/legal
#    sudo mkdir -p /var/log/tucentropdf/legal-audit
#    sudo chown -R app:app /var/tucentropdf/

# 4. VALIDAR CONFIGURACIÓN:
#    Ejecutar: go run cmd/server/main.go --validate-legal-audit

# =============================================================================
# SEGURIDAD CRÍTICA
# =============================================================================

# ⚠️  ADVERTENCIAS DE SEGURIDAD:
# - NUNCA subir este archivo a control de versiones con claves reales
# - Cambiar TODAS las claves por defecto en producción
# - Usar gestores de secretos (HashiCorp Vault, AWS Secrets, etc.)
# - Rotar claves regularmente (cada 90 días mínimo)
# - Monitorear accesos a variables de entorno críticas

# ✅ BUENAS PRÁCTICAS:
# - Usar variables de entorno específicas por ambiente
# - Implementar rotación automática de claves
# - Configurar alertas por accesos no autorizados
# - Mantener backup cifrado de configuración
# - Documentar procedimientos de recuperación

# =============================================================================